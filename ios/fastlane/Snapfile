# Snapfile configuration for DNSChat screenshot generation

# List of devices to generate screenshots for
# iPhone 17 Pro Max: 6.9" display (1320 x 2868 px) - Required for App Store
# iPhone 17: 6.3" display - Required for App Store
# iPad Pro 13": 2048 x 2732 px - Using M5 (disabled - uses sidebar navigation)
devices([
  "iPhone 17 Pro Max",
  "iPhone 17"
])

# List of languages to generate screenshots for
languages([
  "en-US",
  "pt-BR"
])

# The name of the scheme to use for building the app
scheme("DNSChat")

# Build configuration - MUST use Release for React Native
# Release embeds the JS bundle, eliminating need for Metro bundler
# Debug requires Metro running at localhost:8081
configuration("Release")

# Test target name
test_target_name("DNSChatUITests")

# Output directory for generated screenshots
output_directory("./fastlane/screenshots")

# Clear all previously generated screenshots before generating new ones
clear_previous_screenshots(true)

# Arguments to pass to the app on launch
# Enable screenshot mode with mock data
launch_arguments([
  "-SCREENSHOT_MODE 1"
])

# Stop after first test failure (set to true for faster debugging)
stop_after_first_error(false)

# Test without building (set to true if you've already built the app)
test_without_building(false)

# Reinstall app before running tests
reinstall_app(true)

# Erase simulator before tests
erase_simulator(true)

# Allow the simulator to boot
concurrent_simulators(false)

# Number of retries for failing tests
number_of_retries(1)

# Additional xcodebuild arguments
# Use xcpretty for cleaner output
# buildlog_path("./fastlane/logs")
