const translations = {
  en: {
    "app.title": "DNS Chat",
    "common.cancel": "Cancel",
    "common.clear": "Clear",
    "common.close": "Close",
    "common.reset": "Reset",
    "common.ok": "OK",
    "common.systemDefault": "System Default",
    "tabs.chats": "Chats",
    "tabs.logs": "Logs",
    "tabs.about": "About",
    "tabs.devLogs": "Dev Logs",
    "chat.newChatSectionTitle": "Start New Conversation",
    "chat.newChatItemTitle": "New Chat",
    "chat.newChatItemSubtitle": "Start a new conversation with DNS AI",
    "chat.recentSectionTitle": "Recent Conversations",
    "chat.recentFooter.one": "1 conversation total",
    "chat.recentFooter.other": "{{count}} conversations total",
    "chat.emptyTitle": "No Conversations Yet",
    "chat.emptySubtitle": "Start your first conversation by tapping \"New Chat\" above. Your chats will appear here.",
    "chat.statisticsTitle": "Statistics",
    "chat.statistics.totalMessagesLabel": "Total Messages",
    "chat.statistics.totalMessagesSubtitle": "{{count}} messages sent",
    "chat.statistics.avgMessagesLabel": "Average per Chat",
    "chat.statistics.avgMessagesSubtitle": "Messages per conversation",
    "chat.messageBadge.one": "1 message",
    "chat.messageBadge.other": "{{count}} messages",
    "chat.actionSheet.message": "Choose an action for this conversation",
    "chat.confirmDelete": "Delete \"{{title}}\"? This action cannot be undone.",
    "chat.preview.noMessages": "No messages yet",
    "chat.action.open": "Open Chat",
    "chat.action.share": "Share Chat",
    "chat.action.delete": "Delete Chat",
    "chat.action.cancel": "Cancel",
    "messages.emptyTitle": "Start a conversation!",
    "messages.emptySubtitle": "Send a message to begin chatting with the AI assistant.",
    "logs.title": "DNS Query Logs",
    "logs.emptyTitle": "No DNS logs yet",
    "logs.emptyDescription": "Run a query to see request details here.",
    "logs.clearPromptTitle": "Clear Logs",
    "logs.clearPromptMessage": "Are you sure you want to clear all DNS query logs?",
    "logs.status.pending": "PENDING",
    "logs.status.success": "SUCCESS",
    "logs.status.failure": "FAILED",
    "logs.responseSection": "Response:",
    "logs.stepsSection": "Query Steps:",
    "logs.menu.expand": "Expand details",
    "logs.menu.collapse": "Collapse details",
    "logs.menu.clear": "Clear logs",
    "logs.method.unknown": "UNKNOWN",
    "logs.queryFallback": "DNS Query",
    "logs.responseMissing": "No response",
    "logs.entry.noMessage": "No message",
    "logs.entry.noDetails": "No additional details",
    "logs.footer.one": "1 query logged",
    "logs.footer.other": "{{count}} queries logged",
    "logs.actions.section": "Actions",
    "logs.actions.clearAllTitle": "Clear All Logs",
    "logs.actions.clearAllSubtitle": "Remove all DNS query history",
    "settings.title": "Settings",
    "settings.section.dns": "DNS Configuration",
    "settings.section.dnsDescription": "Configure DNS server and query methods for optimal performance and privacy.",
    "settings.dns.service": "DNS Service",
    "settings.dns.preferHttps": "Prefer DNS-over-HTTPS",
    "settings.dns.preferHttpsDescription": "Use Cloudflare's secure HTTPS DNS for enhanced privacy",
    "settings.dns.enableMock": "Enable Mock DNS",
    "settings.dns.enableMockDescription": "Use local mock responses when real DNS fails",
    "settings.dns.allowedServersTitle": "Allowed DNS servers",
    "settings.dns.allowedServersDescription": "Only these servers are permitted: {{servers}}",
    "settings.locale.section": "Language",
    "settings.locale.description": "Choose the interface language for DNS Chat.",
    "settings.locale.followSystem": "Match device language",
    "settings.locale.option.en": "English (US)",
    "settings.locale.option.ptBR": "Português (Brasil)",
    "settings.reset.promptTitle": "Reset Settings",
    "settings.reset.promptMessage": "Are you sure you want to reset all settings to default values?",
    "settings.reset.successTitle": "Settings Reset",
    "settings.reset.successMessage": "All settings have been reset to default values.",
    "settings.cache.promptTitle": "Clear Cache",
    "settings.cache.promptMessage": "This will clear all cached DNS responses and conversation history.",
    "settings.cache.successTitle": "Cache Cleared",
    "settings.cache.successMessage": "All cached data has been cleared.",
    "settings.dnsOption.default": "ch.at (Default)",
    "settings.dnsOption.defaultDescription": "Official ChatDNS server with AI responses",
    "settings.dnsOption.pieter": "llm.pieter.com",
    "settings.dnsOption.pieterDescription": "Pieter's LLM service via DNS",
    "settings.dnsOption.googlePrimary": "Google Public DNS (8.8.8.8)",
    "settings.dnsOption.googleSecondary": "Google Public DNS (8.8.4.4)",
    "settings.dnsOption.googleDescription": "Public resolver provided by Google (fallback only)",
    "settings.dnsOption.cloudflarePrimary": "Cloudflare DNS (1.1.1.1)",
    "settings.dnsOption.cloudflareSecondary": "Cloudflare DNS (1.0.0.1)",
    "settings.dnsOption.cloudflareDescription": "Privacy-focused resolver provided by Cloudflare (fallback only)",
    "settings.test.button": "Run DNS Capability Test",
    "settings.test.lastResult": "Last Test Result",
    "settings.test.lastError": "Last Test Error",
    "settings.test.running": "Testing...",
    "settings.method.section": "Transport Preference",
    "settings.method.description": "Select how DNS Chat resolves queries when multiple transports are available.",
    "settings.method.automatic": "Automatic (best effort)",
    "settings.method.preferHttps": "Prefer HTTPS fallback",
    "settings.method.udpOnly": "UDP only",
    "settings.method.neverHttps": "Avoid HTTPS",
    "settings.method.nativeFirst": "Native module first",
    "settings.method.automaticDescription": "Balanced fallback across supported transports",
    "settings.method.preferHttpsDescription": "Prioritize HTTPS when experimental transports are enabled; fall back if unsupported",
    "settings.method.udpOnlyDescription": "Stick to classic UDP lookups only",
    "settings.method.neverHttpsDescription": "Skip HTTPS tunnels entirely",
    "settings.method.nativeFirstDescription": "Start with the native module before other transports",
    "settings.locale.followSystemDescription": "Automatically switch when your device language changes",
    "settings.dns.sheetTitle": "Select DNS Service",
    "settings.dns.sheetSubtitle": "Choose your preferred DNS resolver",
    "settings.test.sectionTitle": "Transport Test",
    "settings.test.sectionDescription": "Run a sample query across transports. Check the Logs screen for detailed traces.",
    "settings.test.sampleMessageLabel": "Test message",
    "settings.test.transportSectionTitle": "Force a transport",
    "settings.test.transport.native": "Native",
    "settings.test.transport.udp": "UDP",
    "settings.test.transport.tcp": "TCP",
    "settings.test.transport.https": "HTTPS",
    "settings.test.resultLabel": "Result",
    "settings.test.errorLabel": "Error",
    "common.clearCache": "Clear Cache",
    "common.resetSettings": "Reset Settings",
    "settings.shareApp": "Share DNS Chat",
    "settings.shareAppMessage": "Check out DNSChat – chat with AI over DNS TXT queries!",
    "settings.shareAppSubtitle": "Tell others about this app",
    "settings.openGithub": "Open GitHub",
    "settings.openGithubSubtitle": "Visit the project repository",
    "settings.supportSection": "Support",
    "settings.supportSectionDescription": "Need help or want to give feedback?",
    "settings.support.help": "Help & Feedback",
    "settings.support.helpSubtitle": "Get help or send feedback",
    "settings.support.report": "Report Bug",
    "settings.support.reportSubtitle": "Found an issue? Let us know",
    "settings.aboutSection": "About",
    "settings.about.sectionDescription": "Learn more about DNS Chat and its inspiration.",
    "settings.about.appVersion": "App Version",
    "settings.about.versionLatest": "Latest",
    "settings.about.description": "Chat with AI using DNS TXT queries — a unique approach to LLM communication.",
    "settings.about.featuresTitle": "Key Features",
    "settings.about.feature.nativeModule": "Native DNS module with iOS 26 support",
    "settings.about.feature.glassUI": "Liquid Glass UI for modern visuals",
    "settings.about.feature.logs": "Detailed DNS transport logging",
    "settings.about.feature.localization": "Bilingual interface (English & Portuguese)",
    "settings.about.feature.transports": "Multiple DNS transport methods (UDP, TCP, HTTPS)",
    "about.inspirationTitle": "Inspiration",
    "about.inspirationFooter": "This project was inspired by contributions from the open-source community.",
    "about.projectTitle": "Project",
    "about.project.repoSubtitle": "View source code and contribute",
    "about.project.issuesSubtitle": "Found a bug? Let us know",
    "about.project.socialSubtitle": "Follow for updates",
    "about.developerTitle": "Developer",
    "about.developer.subtitle": "Created by @mneves75",
    "about.developer.logsTitle": "Developer Logs (Dev)",
    "about.developer.logsSubtitle": "Open DNS logs viewer screen",
    "about.thanksTitle": "Special Thanks",
    "about.thanksFooter": "This project wouldn't be possible without these open-source projects and services",
    "settings.advanced.section": "Advanced",
    "settings.advanced.description": "Advanced utilities for power users.",
    "settings.advanced.clearSubtitle": "Remove all cached DNS responses",
    "settings.advanced.resetSubtitle": "Restore all settings to defaults",
    "settings.support.sheetTitle": "Support Options",
    "settings.support.sheetMessage": "How can we help you today?",
    "settings.support.docs": "View Documentation",
    "settings.support.community": "Join Community",
    "settings.support.email": "Send Email",
    "settings.mock.toggleError": "Failed to save Mock DNS preference",
    "settings.preference.toggleError": "Failed to save DNS method preference",
    "notFound.title": "Oops!",
    "notFound.message": "This screen does not exist.",
    "notFound.button": "Go back home",
    "profile.title": "Profile",
    "profile.defaultName": "User",
    "profile.subtitle": "{{name}}'s Profile",
    "about.title": "About",
    "devLogs.title": "Dev DNS Logs",
    "chat.header": "Chat",
    "profile.header": "Profile",
    "settings.header": "Settings",
  },
  "pt-BR": {
    "app.title": "DNS Chat",
    "common.cancel": "Cancelar",
    "common.clear": "Limpar",
    "common.close": "Fechar",
    "common.reset": "Redefinir",
    "common.ok": "OK",
    "common.systemDefault": "Idioma do sistema",
    "tabs.chats": "Conversas",
    "tabs.logs": "Registros",
    "tabs.about": "Sobre",
    "tabs.devLogs": "Logs Dev",
    "chat.newChatSectionTitle": "Iniciar nova conversa",
    "chat.newChatItemTitle": "Nova conversa",
    "chat.newChatItemSubtitle": "Comece um novo diálogo com o DNS AI",
    "chat.recentSectionTitle": "Conversas recentes",
    "chat.recentFooter.one": "1 conversa no total",
    "chat.recentFooter.other": "{{count}} conversas no total",
    "chat.emptyTitle": "Nenhuma conversa ainda",
    "chat.emptySubtitle": "Toque em \"Nova conversa\" para iniciar. Suas conversas aparecerão aqui.",
    "chat.statisticsTitle": "Estatísticas",
    "chat.statistics.totalMessagesLabel": "Total de mensagens",
    "chat.statistics.totalMessagesSubtitle": "{{count}} mensagens enviadas",
    "chat.statistics.avgMessagesLabel": "Média por conversa",
    "chat.statistics.avgMessagesSubtitle": "Mensagens por conversa",
    "chat.messageBadge.one": "1 mensagem",
    "chat.messageBadge.other": "{{count}} mensagens",
    "chat.actionSheet.message": "Escolha uma ação para esta conversa",
    "chat.confirmDelete": "Excluir \"{{title}}\"? Esta ação não pode ser desfeita.",
    "chat.preview.noMessages": "Nenhuma mensagem ainda",
    "chat.action.open": "Abrir conversa",
    "chat.action.share": "Compartilhar conversa",
    "chat.action.delete": "Excluir conversa",
    "chat.action.cancel": "Cancelar",
    "messages.emptyTitle": "Comece uma conversa!",
    "messages.emptySubtitle": "Envie uma mensagem para iniciar o bate-papo com o assistente.",
    "logs.title": "Logs de consultas DNS",
    "logs.emptyTitle": "Nenhum log de DNS ainda",
    "logs.emptyDescription": "Execute uma consulta para ver os detalhes aqui.",
    "logs.clearPromptTitle": "Limpar logs",
    "logs.clearPromptMessage": "Tem certeza de que deseja limpar todos os logs de consultas DNS?",
    "logs.status.pending": "PENDENTE",
    "logs.status.success": "SUCESSO",
    "logs.status.failure": "FALHA",
    "logs.responseSection": "Resposta:",
    "logs.stepsSection": "Etapas da consulta:",
    "logs.menu.expand": "Expandir detalhes",
    "logs.menu.collapse": "Ocultar detalhes",
    "logs.menu.clear": "Limpar logs",
    "logs.method.unknown": "DESCONHECIDO",
    "logs.queryFallback": "Consulta DNS",
    "logs.responseMissing": "Sem resposta",
    "logs.entry.noMessage": "Sem mensagem",
    "logs.entry.noDetails": "Sem detalhes adicionais",
    "logs.footer.one": "1 consulta registrada",
    "logs.footer.other": "{{count}} consultas registradas",
    "logs.actions.section": "Ações",
    "logs.actions.clearAllTitle": "Limpar todos os logs",
    "logs.actions.clearAllSubtitle": "Remover todo o histórico de consultas DNS",
    "settings.title": "Configurações",
    "settings.section.dns": "Configuração de DNS",
    "settings.section.dnsDescription": "Configure o servidor e os métodos para obter desempenho e privacidade ideais.",
    "settings.dns.service": "Serviço DNS",
    "settings.dns.preferHttps": "Preferir DNS-over-HTTPS",
    "settings.dns.preferHttpsDescription": "Use o DNS HTTPS seguro da Cloudflare para mais privacidade",
    "settings.dns.enableMock": "Ativar DNS simulado",
    "settings.dns.enableMockDescription": "Use respostas locais simuladas quando o DNS real falhar",
    "settings.dns.allowedServersTitle": "Servidores DNS permitidos",
    "settings.dns.allowedServersDescription": "Apenas estes servidores são aceitos: {{servers}}",
    "settings.locale.section": "Idioma",
    "settings.locale.description": "Escolha o idioma da interface do DNS Chat.",
    "settings.locale.followSystem": "Usar idioma do dispositivo",
    "settings.locale.option.en": "Inglês (EUA)",
    "settings.locale.option.ptBR": "Português (Brasil)",
    "settings.reset.promptTitle": "Redefinir configurações",
    "settings.reset.promptMessage": "Deseja realmente redefinir todas as configurações para os valores padrão?",
    "settings.reset.successTitle": "Configurações redefinidas",
    "settings.reset.successMessage": "Todas as configurações voltaram aos valores padrão.",
    "settings.cache.promptTitle": "Limpar cache",
    "settings.cache.promptMessage": "Isso irá limpar respostas DNS e histórico de conversas armazenados em cache.",
    "settings.cache.successTitle": "Cache limpo",
    "settings.cache.successMessage": "Todos os dados em cache foram removidos.",
    "settings.dnsOption.default": "ch.at (Padrão)",
    "settings.dnsOption.defaultDescription": "Servidor oficial ChatDNS com respostas de IA",
    "settings.dnsOption.pieter": "llm.pieter.com",
    "settings.dnsOption.pieterDescription": "Serviço de LLM do Pieter via DNS",
    "settings.dnsOption.googlePrimary": "Google Public DNS (8.8.8.8)",
    "settings.dnsOption.googleSecondary": "Google Public DNS (8.8.4.4)",
    "settings.dnsOption.googleDescription": "Resolvedor público do Google (apenas fallback)",
    "settings.dnsOption.cloudflarePrimary": "Cloudflare DNS (1.1.1.1)",
    "settings.dnsOption.cloudflareSecondary": "Cloudflare DNS (1.0.0.1)",
    "settings.dnsOption.cloudflareDescription": "Resolvedor focado em privacidade da Cloudflare (apenas fallback)",
    "settings.test.button": "Executar teste de DNS",
    "settings.test.lastResult": "Último resultado",
    "settings.test.lastError": "Último erro",
    "settings.test.running": "Testando...",
    "settings.method.section": "Preferência de transporte",
    "settings.method.description": "Selecione como o DNS Chat resolve consultas quando há vários transportes.",
    "settings.method.automatic": "Automático (melhor esforço)",
    "settings.method.preferHttps": "Preferir fallback HTTPS",
    "settings.method.udpOnly": "Apenas UDP",
    "settings.method.neverHttps": "Evitar HTTPS",
    "settings.method.nativeFirst": "Módulo nativo primeiro",
    "settings.method.automaticDescription": "Equilíbrio entre todos os transportes disponíveis",
    "settings.method.preferHttpsDescription": "Prioriza HTTPS quando os transportes experimentais estão ativos; faz fallback se não houver suporte",
    "settings.method.udpOnlyDescription": "Fica apenas nas consultas UDP clássicas",
    "settings.method.neverHttpsDescription": "Ignora túneis HTTPS completamente",
    "settings.method.nativeFirstDescription": "Começa pelo módulo nativo antes dos demais",
    "settings.locale.followSystemDescription": "Altera automaticamente conforme o idioma do dispositivo",
    "settings.dns.sheetTitle": "Selecionar serviço DNS",
    "settings.dns.sheetSubtitle": "Escolha o resolvedor DNS preferido",
    "settings.test.sectionTitle": "Teste de transporte",
    "settings.test.sectionDescription": "Execute uma consulta exemplo em todos os transportes. Confira os detalhes na tela de Logs.",
    "settings.test.sampleMessageLabel": "Mensagem de teste",
    "settings.test.transportSectionTitle": "Forçar um transporte",
    "settings.test.transport.native": "Nativo",
    "settings.test.transport.udp": "UDP",
    "settings.test.transport.tcp": "TCP",
    "settings.test.transport.https": "HTTPS",
    "settings.test.resultLabel": "Resultado",
    "settings.test.errorLabel": "Erro",
    "common.clearCache": "Limpar cache",
    "common.resetSettings": "Redefinir configurações",
    "settings.shareApp": "Compartilhar DNS Chat",
    "settings.shareAppMessage": "Conheça o DNSChat – converse com IA usando consultas DNS TXT!",
    "settings.shareAppSubtitle": "Conte para outras pessoas sobre o app",
    "settings.openGithub": "Abrir GitHub",
    "settings.openGithubSubtitle": "Visite o repositório do projeto",
    "settings.supportSection": "Suporte",
    "settings.supportSectionDescription": "Precisa de ajuda ou quer enviar feedback?",
    "settings.support.help": "Ajuda e feedback",
    "settings.support.helpSubtitle": "Obtenha ajuda ou envie feedback",
    "settings.support.report": "Reportar bug",
    "settings.support.reportSubtitle": "Encontrou um problema? Avise-nos",
    "settings.aboutSection": "Sobre",
    "settings.about.sectionDescription": "Saiba mais sobre o DNS Chat e sua inspiração.",
    "settings.about.appVersion": "Versão do app",
    "settings.about.versionLatest": "Atual",
    "settings.about.description": "Converse com IA usando consultas DNS TXT — uma abordagem única para comunicação com LLM.",
    "settings.about.featuresTitle": "Principais recursos",
    "settings.about.feature.nativeModule": "Módulo DNS nativo com suporte ao iOS 26",
    "settings.about.feature.glassUI": "Interface Liquid Glass moderna",
    "settings.about.feature.logs": "Logs detalhados de transporte DNS",
    "settings.about.feature.localization": "Interface bilíngue (inglês e português)",
    "settings.about.feature.transports": "Múltiplos transportes DNS (UDP, TCP, HTTPS)",
    "about.inspirationTitle": "Inspiração",
    "about.inspirationFooter": "Este projeto foi inspirado pelas contribuições da comunidade open-source.",
    "about.projectTitle": "Projeto",
    "about.project.repoSubtitle": "Veja o código-fonte e contribua",
    "about.project.issuesSubtitle": "Encontrou um bug? Avise-nos",
    "about.project.socialSubtitle": "Siga para novidades",
    "about.developerTitle": "Desenvolvedor",
    "about.developer.subtitle": "Criado por @mneves75",
    "about.developer.logsTitle": "Logs de desenvolvedor (Dev)",
    "about.developer.logsSubtitle": "Abrir visualizador de logs DNS",
    "about.thanksTitle": "Agradecimentos",
    "about.thanksFooter": "Este projeto só é possível graças a esses serviços e projetos open-source",
    "settings.advanced.section": "Avançado",
    "settings.advanced.description": "Utilitários avançados para usuários experientes.",
    "settings.advanced.clearSubtitle": "Remover todas as respostas DNS em cache",
    "settings.advanced.resetSubtitle": "Restaurar todas as configurações para o padrão",
    "settings.support.sheetTitle": "Opções de suporte",
    "settings.support.sheetMessage": "Como podemos ajudar você hoje?",
    "settings.support.docs": "Ver documentação",
    "settings.support.community": "Entrar na comunidade",
    "settings.support.email": "Enviar e-mail",
    "settings.mock.toggleError": "Falha ao salvar a preferência de DNS simulado",
    "settings.preference.toggleError": "Falha ao salvar a preferência de método DNS",
    "notFound.title": "Ops!",
    "notFound.message": "Esta tela não existe.",
    "notFound.button": "Voltar para o início",
    "profile.title": "Perfil",
    "profile.defaultName": "Usuário",
    "profile.subtitle": "Perfil de {{name}}",
    "about.title": "Sobre",
    "devLogs.title": "Logs DNS de desenvolvedor",
    "chat.header": "Conversa",
    "profile.header": "Perfil",
    "settings.header": "Configurações",
  },
} as const;

export type Translations = typeof translations.en;
export type TranslationKey = keyof Translations;
export type SupportedLocale = keyof typeof translations;

export interface SupportedLocaleOption {
  tag: SupportedLocale;
  labelKey: TranslationKey;
}

export const SUPPORTED_LOCALE_OPTIONS: SupportedLocaleOption[] = [
  { tag: "en", labelKey: "settings.locale.option.en" },
  { tag: "pt-BR", labelKey: "settings.locale.option.ptBR" },
];

const FALLBACK_LOCALE: SupportedLocale = "en";

export function resolveLocale(tag: string | null | undefined): SupportedLocale {
  if (!tag) {
    return FALLBACK_LOCALE;
  }

  const directMatch = Object.keys(translations).find(
    (locale) => locale.toLowerCase() === tag.toLowerCase(),
  ) as SupportedLocale | undefined;
  if (directMatch) {
    return directMatch;
  }

  const languageCode = tag.split("-")[0];
  const languageMatch = Object.keys(translations).find((locale) =>
    locale.toLowerCase().startsWith(languageCode.toLowerCase()),
  ) as SupportedLocale | undefined;

  return languageMatch ?? FALLBACK_LOCALE;
}

export function translate(
  locale: string,
  key: TranslationKey,
  replacements: Record<string, string | number> = {},
): string {
  const resolved = resolveLocale(locale);
  const template = translations[resolved][key] ?? translations[FALLBACK_LOCALE][key];

  return template.replace(/{{(\w+)}}/g, (_, placeholder) => {
    const value = replacements[placeholder];
    return value === undefined || value === null ? "" : String(value);
  });
}

export function getFallbackLocale(): SupportedLocale {
  return FALLBACK_LOCALE;
}

export function getTranslationsFor(locale: string) {
  const resolved = resolveLocale(locale);
  return translations[resolved];
}
